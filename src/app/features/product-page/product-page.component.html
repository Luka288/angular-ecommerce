<main>
  <section class="mainInfo">
    <div class="imageSide">
      <p-galleria
        [value]="currentProductLib.length ? currentProductLib : singleThumbnail"
        [showItemNavigators]="false"
        [circular]="true"
        [responsiveOptions]="responsiveOptions"
        [containerStyle]="{ 'max-width': '640px' }"
        [numVisible]="5"
      >
        <ng-template #item let-item>
          <img [src]="item.thumbnailImageSrc" />
        </ng-template>
        <ng-template #thumbnail let-item>
          <img [src]="item.thumbnailImageSrc" class="images" />
        </ng-template>
      </p-galleria>

      <div class="basicDesc">
        <div class="titleRating">
          <div class="title">
            <p>
              {{ singleItem?.title }}
            </p>
          </div>
          <div class="decor">
            <a (click)="navigateToSearch(singleItem!.brand)" class="seeMore">
              See more {{ singleItem?.brand }} products
            </a>
            <span class="ratingStars" *ngIf="singleItem?.rating">
              {{ singleItem?.rating }}
              <p
                *ngFor="
                  let star of [].constructor(
                    calcRating(singleItem?.rating).full
                  )
                "
                class="star"
              >
                <i class="bi bi-star-fill"></i>
              </p>
              <p *ngIf="calcRating(singleItem?.rating).half" class="star">
                <i class="bi bi-star-half"></i>
              </p>
            </span>
            <hr />
            <div class="bottomDesc">
              <p>
                {{ singleItem?.price?.current }}
                <span>
                  {{ singleItem?.price?.currency }}
                </span>
              </p>
            </div>
          </div>
          <div class="description">
            <p>
              brand:
              <span>
                {{ singleItem?.brand }}
              </span>
            </p>
            <p>
              issue date:
              <span>
                {{ singleItem?.issueDate | date : "dd/MM/yyyy" }}
              </span>
            </p>
            <p>
              warranty:
              <span *ngIf="singleItem?.warranty" class="warranty">Yes</span>
            </p>
            <p>
              stock:
              <span>
                {{ singleItem?.stock }}
              </span>
            </p>
            <p class="descP">
              {{ singleItem?.description }}
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="purchaseContainer">
      <div class="head">
        <p>Buy for</p>
        <span>
          {{ singleItem?.price?.current }} {{ singleItem?.price?.currency }}
        </span>
      </div>
      <div class="body">
        <!-- თუ იუზერი ავტორიზირებულია -->
        <div class="textWrap">
          @if (true) {
          <p>
            We will deliver the product to your address. Prior to the delivery
            date, we will contact you to confirm the accuracy of the provided
            information.
          </p>
          }
        </div>
        @if (singleItem!.stock > 0) {
        <p>Select Quantity:</p>
        <app-select
          [stock]="arrayOfStock"
          (quantitySelected)="catchQty($event)"
        />
        }@else{
        <p class="text-danger">Out of stock</p>
        }
      </div>
      <div class="buttons">
        <button class="btn btn-warning" [disabled]="singleItem?.stock === 0">
          Add to cart
        </button>
        <button class="btn btn-primary">Add to wishlist</button>
      </div>
    </div>
  </section>
</main>
